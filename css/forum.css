/* ================================
   NOTICE
   ================================ */

.forum-notice {
  padding: 10px;
  margin-bottom: 15px;
  border-radius: 4px;
  background-color: rgba(var(--azalea-r), 0.3);
  color: var(--masala);
  font-size: 0.95rem;
}

/* ================================
   TOP-LEVEL COMMENTS
   ================================ */

.forum-comment {
  border: 5px solid var(--pesto);
  background: linear-gradient(135deg, rgba(var(--azalea-r),1), rgba(var(--deep-blush-r),1));
  padding: 8px;
  margin-bottom: 10px;
  color: var(--masala);
  max-width: 100%;
  overflow: hidden;
  overflow-wrap: anywhere;
  word-break: break-word;
  contain: content;
}

/* ================================
   REPLIES
   ================================ */

.forum-reply {
  border: 5px inset var(--cadillac);
  background: linear-gradient(180deg, rgba(var(--deep-blush-r),1), rgba(var(--brilliant-rose-r),1));
  padding: 8px;
  margin-top: 8px;
  margin-left: 20px;
  color: var(--masala);
  max-width: calc(100% - 20px);
  box-sizing: border-box;
  overflow: hidden;
  overflow-wrap: anywhere;
  word-break: break-word;
}

.forum-reply-nested {
  border: 5px inset var(--gray); /* silver/grey border for nested replies */
  /* keep nested replies in the pink family to avoid mixing golds and pinks */
  background: linear-gradient(90deg, rgba(var(--hibiscus-r),1), rgba(var(--deep-blush-r),1));
  margin-left: 40px;
  /* nested replies can be darker; use light text for contrast */
  color: #ffffff;
  width: calc(100% - 40px);
  max-width: 100%;
  overflow: hidden;
  overflow-wrap: anywhere;
  word-break: break-word;
}

/* meta and links */
.forum-meta {
  color: var(--masala);
  font-size: 0.95rem;
}

/* Ensure author/name/date metadata is highly readable */
.forum-meta .author,
.forum-meta .name,
.forum-author,
.post-author,
.post-date,
.forum-date,
.forum-meta time {
  color: var(--masala);
  font-weight: 600;
}

/* ================================
   MEDIA — SAFE DEFAULTS
   ================================ */

.forum-media.image {
  max-width: min(250px, 100%);
  height: auto;
  display: block;
}

.forum-media-group {
  display: flex;
  flex-direction: column;
  gap: 8px;
  align-items: flex-start;
  margin-top: 8px;
  max-width: 100%;
  overflow: hidden;
}

.forum-media-item {
  display: flex;
  flex: 1 1 auto;
  max-width: 100%;
  min-width: 0;
}

.forum-media-block {
  margin-top: 8px;
}

/* video / iframe embeds */
.forum-media iframe,
.forum-media video,
.forum-media audio,
iframe.forum-media,
videos.forum-media,
audio.forum-media {
  width: min(560px, 100%);
  max-width: 100%;
  height: auto;
  display: block;
}

/* YouTube / video aspect ratio */
.forum-media.video iframe,
iframe.forum-media.video {
  width: min(560px, 100%);
  max-width: 100%;
  aspect-ratio: 16 / 9;
}

/* Spotify / SoundCloud */
.forum-media.audio iframe,
iframe.forum-media.audio {
  width: min(560px, 100%);
  max-width: 100%;
  height: 152px;
}

.forum-media.audio {
  max-width: 100%;
}

.forum-media.audio,
.forum-media.video,
.forum-media.image {
  overflow: hidden;
}

/* ================================
   LINK FALLBACK (NOT BLUE)
   ================================ */

.forum-comment .forum-body a,
.forum-reply .forum-body a,
.forum-reply-nested .forum-body a {
  color: inherit; /* Match the color of the surrounding text */
  text-decoration: underline; /* Always underline */
  text-decoration-thickness: 2px;
  text-underline-offset: 2px;
}

/* Links that open in new tab - styling handled via HTML target attribute */

/* ================================
   ASCII-ART FRIENDLY POSTS
   ================================ */

.forum-body {
  font-family: "MS PGothic", "MS Pゴシック";
  white-space: pre-wrap;
  tab-size: 4;
  overflow-wrap: anywhere;
  word-break: break-word;
}

#post-form input[type="text"],
#post-form input[type="search"],
#post-form input:not([type]),
#post-form textarea,
#forum-search-input,
#blog-search-input,
#comment-username,
.reply-form textarea {
  font-family: "Mona", sans-serif;
  white-space: pre;
  tab-size: 4;
}

#post-form input::placeholder,
#forum-search-input::placeholder,
#blog-search-input::placeholder,
#comment-username::placeholder,
.reply-form input::placeholder {
  font-family: "Mona", sans-serif;
}

.attachment-preview {
  margin-top: 6px;
}

.attachment-preview-grid {
  display: flex;
  flex-wrap: wrap;
  gap: 6px;
  align-items: flex-start;
}

.attachment-preview-item img {
  width: 72px;
  height: 72px;
  object-fit: cover;
  border: 1px solid var(--pesto);
  border-radius: 2px;
  background: rgba(var(--azalea-r), 0.2);
  display: block;
}

.forum-meta {
  font-family: "Mona";
}

/* ================================
   COMMENT ACTION BUTTONS
   ================================ */

/* ================================
   REPLY CONTROLS (ALWAYS BELOW)
   ================================ */

.forum-reply-button {
  display: inline-block;
  margin-top: 6px;
}

.reply-form {
  display: block;
  clear: both;
  margin-top: 6px;
}

/* dark-mode forum styles removed */

/* Styles for flag/report modal (moved from inline) */
.flag-title { margin-top: 0; }
.flag-reasons { display: flex; flex-direction: column; gap: 0.5rem; margin-bottom: 1rem; }
.flag-details { width: 100%; box-sizing: border-box; margin-bottom: 1rem; }
.flag-actions { display: flex; gap: 0.5rem; justify-content: flex-end; }