<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Index</title>
  <link rel="stylesheet" href="style.css" />

  <!-- OpenGraph / Facebook Meta -->
  <meta property="og:title" content="Juri's Stuff" />
  <meta property="og:description" content="Juri's personal space on the web" />
  <meta property="og:image" content="https://file.garden/ZhTgSjrp5nAroRKq/216b471b796e732d46861f32575a7c59.gif" />
  <meta property="og:url" content="https://jurietto.github.io/" />
  <meta property="og:type" content="website" />

  <!-- Twitter Card -->
  <meta name="twitter:card" content="summary_large_image" />
  <meta name="twitter:title" content="Juri's Stuff" />
  <meta name="twitter:description" content="Juri's personal space on the web" />
  <meta name="twitter:image" content="https://file.garden/ZhTgSjrp5nAroRKq/216b471b796e732d46861f32575a7c59.gif" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
</head>
<body>

  <!-- Music Player -->
  <div id="player-container"></div>

  <div class="main-content">
    <h1>Index</h1>

    <div id="last-updated">
      <p>Last Updated: Loading...</p>
    </div>

    <div id="my-status" style="cursor: pointer;" onclick="window.location.href='updates/statuslog.html'">
      <div class="status-text">
        <span id="myStatus">Loading status...</span>
      </div>
    </div>

    <p class="page-text">
      I'm Juri (or Juliet) and I'm from California. I like: working with audio, reading old VN's, gothic lolita punk j-fashion/subculture.
      My favorite character is Charmmy Kitty. Mental health is something that's important to me.
      As a neurodivergent person, life can sometimes feel a little unusual, but I try to be patient with myself, and I'm working on getting better.
      In my free time, I like to code, go on hikes, DJ, bake, and journal.
      I'm a little bit of a quiet person, but don't hesitate to send a message for friendly conversation.
      I've had all sorts of jobs over the years – in food service, in hospitality, fixing computers.
    </p>

    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th class="detailsColumn">Type</th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td class="file-cell"><img src="media/crown.png" class="icon" />Discord – sotokomori</td>
          <td>Text</td>
        </tr>
        <tr>
          <td class="file-cell"><img src="media/crown.png" class="icon" />
            <a href="https://www3.cbox.ws/box/?boxid=3544658&boxtag=e80zwm" target="_blank">Chatzone</a>
          </td>
          <td>URL</td>
        </tr>
        <tr>
          <td class="file-cell"><img src="media/crown.png" class="icon" />
            <a href="https://x.com/sotokomorii" target="_blank">Twitter</a>
          </td>
          <td>URL</td>
        </tr>
        <tr>
          <td class="file-cell"><img src="media/crown.png" class="icon" />
            <a href="https://www.youtube.com/@juriscafe" target="_blank">YouTube</a>
          </td>
          <td>URL</td>
        </tr>
        <tr>
          <td class="file-cell"><img src="media/crown.png" class="icon" />
            <a href="https://vndb.org/u274298" target="_blank">Visual Novel Database</a>
          </td>
          <td>URL</td>
        </tr>
        <tr>
          <td class="file-cell"><img src="media/crown.png" class="icon" />
            <a href="updates/updates.html">Updates</a>
          </td>
          <td>HTML</td>
        </tr>
        <tr>
          <td class="file-cell"><img src="media/crown.png" class="icon" />
            <a href="menhera">Menhera</a>
          </td>
          <td>HTML</td>
        </tr>
      </tbody>
    </table>

    <div id="footer"></div>
  </div>

  <!-- Scripts -->
  <script>
    function formatStatusText(text) {
      const urlRegex = /(https?:\/\/[^\s]+)/g;
      const lines = text.split('\n').map(line => {
        const match = line.match(urlRegex);
        if (!match) return line;

        const url = match[0];

        // YouTube Embed (Responsive)
        if (url.includes("youtube.com/watch?v=") || url.includes("youtu.be/")) {
          let videoId = '';
          if (url.includes("watch?v=")) {
            videoId = url.split("v=")[1].split("&")[0];
          } else {
            videoId = url.split("youtu.be/")[1].split("?")[0];
          }
          return `
            <div style="position: relative; padding-bottom: 56.25%; height: 0; overflow: hidden; margin: 12px auto; max-width: 100%;">
              <iframe src="https://www.youtube.com/embed/${videoId}"
                style="position: absolute; top: 0; left: 0; width: 100%; height: 100%; border-radius: 8px;"
                frameborder="0"
                allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture"
                allowfullscreen>
              </iframe>
            </div>`;
        }

        // SoundCloud Embed
        if (url.includes("soundcloud.com")) {
          return `
            <div style="margin: 12px auto; text-align: center; max-width: 100%;">
              <iframe width="100%" height="166" scrolling="no" frameborder="no"
                allow="autoplay"
                src="https://w.soundcloud.com/player/?url=${encodeURIComponent(url)}&color=%23ff5500&auto_play=false&hide_related=false&show_comments=true&show_user=true&show_reposts=false">
              </iframe>
            </div>`;
        }

        // Image Embed
        if (url.match(/\.(jpeg|jpg|gif|png|webp)$/i)) {
          return `<img src="${url}" alt="status image" style="display: block; margin: 12px auto; min-height: 200px; max-height: 300px;" />`;
        }

        // Plain link fallback
        return line.replace(urlRegex, '<a href="$1" target="_blank">$1</a>');
      });

      return lines.join('<br>');
    }

    // Load player
    fetch('player.html')
      .then(res => res.text())
      .then(html => {
        document.getElementById('player-container').innerHTML = html;
        const script = document.createElement('script');
        script.src = 'player.js';
        script.defer = true;
        document.body.appendChild(script);
      });

    // Load footer
    fetch('footer.html')
      .then(res => res.text())
      .then(data => {
        document.getElementById('footer').innerHTML = data;
      });

    // Load status
    fetch('updates/statuslog.json')
      .then(res => res.json())
      .then(data => {
        const latest = data[0];
        if (latest) {
          document.getElementById('myStatus').innerHTML = formatStatusText(latest.text);
        }
      })
      .catch(err => {
        console.error('Failed to load status:', err);
        document.getElementById('myStatus').textContent = 'Status unavailable.';
      });
  </script>

  <script src="script.js"></script>

</body>
</html>
