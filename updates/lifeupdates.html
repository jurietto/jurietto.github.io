<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Life Updates</title>
  <link rel="stylesheet" href="../style.css" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
</head>

<body>
  <div class="main-content">

    <h1>
      Life Updates
      <img src="https://file.garden/ZhTgSjrp5nAroRKq/ckpxl.gif" alt="" aria-hidden="true" class="icon-header" />
    </h1>

    <div id="last-updated">
      <p>
        <img src="https://file.garden/ZhTgSjrp5nAroRKq/charmmy-kitty-bullet-2.gif" alt="Charmmy Icon" class="icon-date" />
        Last Updated: Loading...
      </p>
    </div>

    <p class="page-text">
      A section where I write about shit going on in my life... keeps a personal log of events, feelings, and my overall mood. It’s informal but keeps a record of what's happening.
    </p>

    <p>
      <a href="https://jurietto.github.io/updates/updates.html">
        <img src="https://file.garden/ZhTgSjrp5nAroRKq/charmmy-6.gif" alt="parent directory icon" class="icon" />
        [parent directory]
      </a>
    </p>

    <!-- Controls block -->
    <div id="controls">
      <label for="sort">Sort by:</label>
      <select id="sort">
        <option value="new">Newest</option>
        <option value="old">Oldest</option>
      </select>
    </div>

    <!-- Injected posts from lu.html -->
    <div id="lu-posts">
      <p>Loading life updates...</p>
    </div>

    <!-- Footer -->
    <div id="footer"></div>

    <script>
      // Load LU HTML content
      fetch('../lu.html')
        .then(res => res.text())
        .then(html => {
          document.getElementById('lu-posts').innerHTML = html;

          // Now apply sorting after posts are injected
          function sortPosts(order) {
            const postsContainer = document.getElementById('lu-posts');
            const posts = Array.from(postsContainer.getElementsByClassName('post'));

            posts.sort((a, b) => {
              const dateA = new Date(a.querySelector('strong').textContent.split('–')[0].trim());
              const dateB = new Date(b.querySelector('strong').textContent.split('–')[0].trim());
              return order === 'old' ? dateA - dateB : dateB - dateA;
            });

            posts.forEach(post => postsContainer.appendChild(post));
          }

          const sortSelect = document.getElementById('sort');
          sortPosts(sortSelect.value);
          sortSelect.addEventListener('change', () => sortPosts(sortSelect.value));
        });

      // Footer loader
      fetch('../footer.html')
        .then(res => res.text())
        .then(html => {
          document.getElementById('footer').innerHTML = html;
        });
    </script>

    <script src="../script.js"></script>
  </div>
</body>
</html>
