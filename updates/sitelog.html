<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Life Updates</title>
  <link rel="stylesheet" href="../style.css" />
  <link rel="icon" href="https://file.garden/ZhTgSjrp5nAroRKq/296.gif" type="image/x-icon" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
</head>

<body>
  <div class="main-content">
    <img class="header-gif" src="https://file.garden/ZhTgSjrp5nAroRKq/charmmy-kitty.gif.gif" alt="animated gif" />

    <h1>Life Updates <img src="https://file.garden/ZhTgSjrp5nAroRKq/ckpxl.gif" alt="" aria-hidden="true" style="vertical-align: middle; margin-left: 6px;" /></h1>

    <div id="last-updated">
      <p>Last Updated: Loading...</p>
    </div>

    <p><em>A section where I write about things going on in my life. This page keeps a personal log of events, feelings, and reflections. It’s informal but keeps a record of my journey.</em></p>

    <p>
      <a href="https://jurietto.github.io/updates/updates.html">
        <img src="https://file.garden/ZhTgSjrp5nAroRKq/cross.gifv" alt="parent directory icon" style="vertical-align: middle; margin-right: 6px;" />
        [parent directory]
      </a>
    </p>

    <!-- Controls block -->
    <div id="controls">
      <label for="sort">Sort by:</label>
      <select id="sort">
        <option value="new">Newest</option>
        <option value="old">Oldest</option>
      </select>
    </div>

    <div id="posts">
      <div class="post">
        <p class="commit-header"><img src="https://file.garden/ZhTgSjrp5nAroRKq/butter.gifv" alt="update icon" style="vertical-align: middle; margin-right: 6px;"><strong>March 14, 2025 – 2:17 PM</strong></p>
        <p class="commit-message">Things have been a bit off, but I’m managing...</p>
      </div>
      <div class="post">
        <p class="commit-header"><img src="https://file.garden/ZhTgSjrp5nAroRKq/butter.gifv" alt="update icon" style="vertical-align: middle; margin-right: 6px;"><strong>February 20, 2025 – 1:13 AM</strong></p>
        <p class="commit-message">I haven’t posted an update since last fall, but...</p>
      </div>
      <!-- Add more posts following the same format -->
    </div>

    <div id="footer"></div>
    <script>
      // Load footer
      fetch('../footer.html').then(res => res.text()).then(html => {
        document.getElementById('footer').innerHTML = html;
      });

      // Sorting logic with dynamic month/year insertion
      document.addEventListener('DOMContentLoaded', () => {
        const postsContainer = document.getElementById('posts');
        const posts = Array.from(postsContainer.getElementsByClassName('post'));
        const sortSelect = document.getElementById('sort');

        // Extract months dynamically from posts
        const months = [...new Set(posts.map(p => {
          const dateText = p.querySelector('strong').textContent.split('–')[0].trim();
          const date = new Date(dateText);
          return `${date.getFullYear()}-${String(date.getMonth() + 1).padStart(2, '0')}`;
        }))].sort().reverse();

        months.forEach(month => {
          const option = document.createElement('option');
          option.value = month;
          option.textContent = month;
          sortSelect.appendChild(option);
        });

        function sortPosts(order) {
          let sortedPosts = posts;

          if (order === 'old') {
            sortedPosts = [...posts].sort((a, b) => new Date(a.querySelector('strong').textContent.split('–')[0].trim()) - new Date(b.querySelector('strong').textContent.split('–')[0].trim()));
          } else if (order === 'new') {
            sortedPosts = [...posts].sort((a, b) => new Date(b.querySelector('strong').textContent.split('–')[0].trim()) - new Date(a.querySelector('strong').textContent.split('–')[0].trim()));
          } else {
            sortedPosts = posts.filter(p => {
              const dateText = p.querySelector('strong').textContent.split('–')[0].trim();
              const date = new Date(dateText);
              const postMonth = `${date.getFullYear()}-${String(date.getMonth() + 1).padStart(2, '0')}`;
              return postMonth === order;
            });
          }

          postsContainer.innerHTML = '';
          sortedPosts.forEach(post => postsContainer.appendChild(post));
        }

        sortPosts(sortSelect.value);

        sortSelect.addEventListener('change', (e) => {
          sortPosts(e.target.value);
        });
      });
    </script>
    <script src="../script.js"></script>
  </div>
</body>
</html>
